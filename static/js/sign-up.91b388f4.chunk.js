(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{146:function(e,t,a){e.exports={primaryColor:"#ef5b4c",centerDirection:"0 auto",paragraph3:"12px",mainContainer:"73.125rem",errorTextWrapper:"ErrorValidation_errorTextWrapper__2DfJG",errorText:"ErrorValidation_errorText__AgGNX"}},147:function(e,t,a){e.exports={headingMobile:"30px",headingTablet:"40px",headingDesktop:"50px",paragraph1:"16px",paragraph2:"14px",paragraph3:"12px",primaryColor:"#ef5b4c",secondaryColor:"#007bff",hoverPrimaryColor:"#c94031",inputColor:"#cecece",focusValidColor:"#64aefd",focusValidColorShadow:"rgba(173, 222, 255, 0.5)",focusInvalidColorShadow:"rgba(253, 171, 194, 0.5)",marginForComponents:"40px",transitionDuration:"400ms",centerDirection:"SignUp_centerDirection__3PgXc",whiteText:"#fff",blackText:"#000",backgroundColor3:"rgb(238, 237, 230)",mainContainer:"73.125rem",registerFormWrapper:"SignUp_registerFormWrapper__1JKSg",registerFormTitle:"SignUp_registerFormTitle__31ezH",registerFormContent:"SignUp_registerFormContent__zq8iA",registerFormText:"SignUp_registerFormText__1x9rY",registrationForm:"SignUp_registrationForm__3xTFS",label:"SignUp_label__uhRfY",labelTitle:"SignUp_labelTitle__2sZ1i",labelPhoneTitle:"SignUp_labelPhoneTitle__2-XgF",inputSection:"SignUp_inputSection__1IGI6",inputSectionValid:"SignUp_inputSectionValid__3tIth SignUp_inputSection__1IGI6",inputSectionInvalid:"SignUp_inputSectionInvalid__33dZa SignUp_inputSection__1IGI6",inputNumberSection:"SignUp_inputNumberSection__sbTtV SignUp_inputSection__1IGI6",inputNumberSectionValid:"SignUp_inputNumberSectionValid__EJkOi SignUp_inputNumberSection__sbTtV SignUp_inputSection__1IGI6",inputNumberSectionInvalid:"SignUp_inputNumberSectionInvalid__ZoQSR SignUp_inputNumberSection__sbTtV SignUp_inputSection__1IGI6",inputNumberFormat:"SignUp_inputNumberFormat__3bSBD",positionsSection:"SignUp_positionsSection__3jMgg",selectLabelTitle:"SignUp_selectLabelTitle__ZjigN",labelContainer:"SignUp_labelContainer__2ei8m",radioLabel:"SignUp_radioLabel__3hgyK",inputRadioLabel:"SignUp_inputRadioLabel__1RKuD",radioLabelTitle:"SignUp_radioLabelTitle__1XH9y",photoLabelTitle:"SignUp_photoLabelTitle__DKeOn",photoInput:"SignUp_photoInput__2N6PG",labelPhotoInput:"SignUp_labelPhotoInput__3DQy9",labelPhotoInputValid:"SignUp_labelPhotoInputValid__1YW61 SignUp_labelPhotoInput__3DQy9",labelPhotoInputInvalid:"SignUp_labelPhotoInputInvalid__11yzA SignUp_labelPhotoInput__3DQy9",leftLabelPhotoInputBlack:"SignUp_leftLabelPhotoInputBlack__2WMex",leftLabelPhotoInputGrey:"SignUp_leftLabelPhotoInputGrey__1chHF SignUp_leftLabelPhotoInputBlack__2WMex",rightLabelPhotoInput:"SignUp_rightLabelPhotoInput__2Omel",signUpButton:"SignUp_signUpButton__rfrMV",firstClonePhotoInputBlack:"SignUp_firstClonePhotoInputBlack__1ndSM",secondClonePhotoInput:"SignUp_secondClonePhotoInput__1_Izz"}},213:function(e,t,a){"use strict";a.r(t);var n=a(148),i=a(125),o=a(31),r=a(32),l=a(35),p=a(33),s=a(36),c=a(0),u=a.n(c),m=a(149),h=a(15),_=a(3),d=a(34),g=a(146),b=a.n(g),S=function(e){var t=e.text;return u.a.createElement("div",{className:b.a.errorTextWrapper},u.a.createElement("p",{className:b.a.errorText},t))},f=a(147),I=a.n(f);a.d(t,"default",function(){return U});var E={name:"required|string|min:3",email:"required|email",phone:"required|number",position:"required",photo:"required"},N={"name.required":"Please choose a unique username for your account","name.min":"Your name is too short","email.required":"Enter a valid email address","email.email":"Email is invalid","phone.required":"Enter a valid phone number","phone.number":"Please write down only the numbers","position.required":"Please choose your position","photo.required":"Please upload your photo"},U=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={name:"",email:"",phone:null,position:"",photo:null,positions:[],token:"",isLoading:!1,error:null,errors:null},a.inputRef=Object(c.createRef)(),a.handleChange=function(e){var t=e.target,n=t.name,o=t.value;a.setState(Object(i.a)({},n,o))},a.formValidation=function(){var e=a.state,t=e.email,i=e.phone,o=a.inputRef.current.files[0],r={};return t&&!t.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)&&(r.email="You entered the wrong email"),i&&!i.match(/\+380\d{9}$/)&&(r.phone="Your phone number must begin with (+380) and then contain 9 digits"),o&&o.size>1048576&&(r.photo="Your photo should not be more than 1 MB"),!!(r.email||r.phone||r.photo)&&(a.setState(function(e){return{errors:Object(n.a)({},e.errors,r)}}),!0)},a.handleSubmit=function(e){a.setState({isLoading:!0}),e.preventDefault();var t=a.inputRef.current,n=a.state,i=n.name,o=n.email,r=n.phone,l=n.position,p=n.photo,s=n.token,c=a.props.onSubmit;a.formValidation()?console.log("validation failed"):Object(m.validateAll)({name:i,email:o,phone:r,position:l,photo:p},E,N).then(function(){var e=new FormData;e.append("position_id",2),e.append("name",i),e.append("email",o),e.append("phone",r),e.append("photo",t.files[0]),fetch("https://frontend-test-assignment-api.abz.agency/api/v1/users",{method:"POST",body:e,headers:{Token:s}}).then(function(e){return e.json()}).then(function(e){if(!1===e.success){var t={};t.doubleUser=e.message,a.setState({errors:t})}else c(),a.reset()}).catch(function(e){a.setState({error:e})})}).catch(function(e){var t={};e.forEach(function(e){t[e.field]=e.message}),a.setState({errors:t})}).finally(function(){return a.setState({isLoading:!1})})},a.reset=function(){a.setState({name:"",email:"",phone:null,position:"",photo:null,errors:null})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),h.b().then(function(t){return e.setState({token:t.data.token})}).catch(function(t){return e.setState({error:t})}),h.a().then(function(t){return e.setState({positions:t.data.positions})}).catch(function(t){return e.setState({error:t})}).finally(function(){return e.setState({isLoading:!1})})}},{key:"render",value:function(){var e,t,a=this,n=this.state,i=n.name,o=n.email,r=n.phone,l=n.position,p=n.photo,s=n.positions,c=n.isLoading,m=n.error,h=n.errors;return u.a.createElement("div",null,c&&u.a.createElement(_.a,null),u.a.createElement("div",{className:I.a.registerFormWrapper},u.a.createElement("h2",{className:I.a.registerFormTitle},"Register to get a work"),u.a.createElement("div",{className:I.a.registerFormContent},u.a.createElement("p",{className:I.a.registerFormText},"Attention! After successful registration and alert, update the list of users in the block from the top"),u.a.createElement("form",{onSubmit:this.handleSubmit,encType:"multipart/form-data",method:"post",className:I.a.registrationForm},u.a.createElement("section",{className:I.a.labelContainer},u.a.createElement("label",{className:I.a.label},u.a.createElement("p",{className:I.a.labelTitle},"Name"),u.a.createElement("input",{type:"text",value:i,onChange:this.handleChange,name:"name",placeholder:"Your name",className:h&&h.name?I.a.inputSectionInvalid:I.a.inputSectionValid}),h&&u.a.createElement(S,{text:h.name})),u.a.createElement("label",{className:I.a.label},u.a.createElement("p",{className:I.a.labelTitle},"Email"),u.a.createElement("input",{type:"email",value:o,onChange:this.handleChange,name:"email",placeholder:"Your email",className:h&&h.email?I.a.inputSectionInvalid:I.a.inputSectionValid}),h&&u.a.createElement(S,{text:h.email})),u.a.createElement("label",{className:I.a.label},u.a.createElement("p",{className:I.a.labelPhoneTitle},"Phone number"),u.a.createElement("input",{type:"tel",value:r,onChange:this.handleChange,name:"phone",placeholder:"+380 XX  XXX  XX XX",className:h&&h.phone?I.a.inputNumberSectionInvalid:I.a.inputNumberSectionValid}),u.a.createElement("p",{className:I.a.inputNumberFormat},"Enter phone number in open format"),h&&u.a.createElement(S,{text:h.phone}))),u.a.createElement("section",{className:I.a.positionsSection},u.a.createElement("p",{className:I.a.selectLabelTitle},"Select your position"),u.a.createElement("div",{className:I.a.labelContainer},s.map(function(e){return u.a.createElement("label",{className:I.a.radioLabel,key:e.id},u.a.createElement("input",{type:"radio",checked:l===e.name,name:"position",value:e.name,onChange:a.handleChange,className:I.a.inputRadioLabel}),u.a.createElement("span",{className:I.a.radioLabelTitle},e.name))})),h&&u.a.createElement(S,{text:h.position})),u.a.createElement("section",{className:I.a.photoSection},u.a.createElement("p",{className:I.a.photoLabelTitle},"Photo"),u.a.createElement("input",{id:"file",type:"file",value:p,onChange:this.handleChange,name:"photo",className:I.a.photoInput,"data-multiple-caption":"{count} files selected",multiple:!0,accept:"image/jpeg",ref:this.inputRef}),u.a.createElement("label",{htmlFor:"file",className:h&&h.photo?I.a.labelPhotoInputInvalid:I.a.labelPhotoInputValid},u.a.createElement("div",{className:p?I.a.leftLabelPhotoInputBlack:I.a.leftLabelPhotoInputGrey},p?(e=p.slice(12),t=25,String(e).length>t?e.slice(0,t).concat("..."):e):"Upload your photo"),u.a.createElement("div",{className:I.a.rightLabelPhotoInput},"Browse")),h&&u.a.createElement(S,{text:h.photo})),m&&u.a.createElement(d.a,{text:m.message}),h&&u.a.createElement("div",{className:I.a.centerDirection},u.a.createElement(S,{text:h.doubleUser})),u.a.createElement("button",{type:"submit",className:I.a.signUpButton},"Sign up now")))))}}]),t}(c.Component)}}]);
//# sourceMappingURL=sign-up.91b388f4.chunk.js.map